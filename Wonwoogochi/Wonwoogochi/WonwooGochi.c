//¿ø¿ì°íÄ¡ÀÇ ÇØ´õµé
#include <stdio.h>
#include <Windows.h>
#include <stdlib.h>
#include <conio.h>

#define MENU 20
#define UP 0
#define DOWN 1
#define SUBMIT 2

int count = 0;

void gotoxy(int x, int y) {
	HANDLE consoleHandle = GetStdHandle(STD_OUTPUT_HANDLE);
	COORD pos;
	pos.X = x;
	pos.Y = y;
	SetConsoleCursorPosition(consoleHandle, pos);
}

void StartMenu() {
	int menu[MENU][MENU] = {
		{1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1},
		{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
		{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
		{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
		{1,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,0,0,0,1},
		{1,0,0,0,0,2,0,0,0,2,0,0,0,2,0,0,0,0,0,1},
		{1,0,0,0,2,0,0,0,2,2,2,0,0,0,2,0,0,0,0,1},
		{1,0,0,0,0,2,0,2,2,2,2,2,0,2,0,0,0,0,0,1},
		{1,0,0,0,2,2,2,2,2,2,2,2,2,2,2,0,0,0,0,1},
		{1,0,0,0,0,2,2,2,2,2,2,2,2,2,0,0,0,0,0,1},
		{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
		{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
		{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
		{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
		{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
		{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
		{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
		{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
		{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
		{1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1}
	};

	for (int i = 0; i < MENU; i++) {
		for (int j = 0; j < MENU; j++) {
			switch (menu[i][j])
			{
			case 0: SetConsoleTextAttribute(GetStdHandle(STD_OUTPUT_HANDLE), 0); printf("¡á"); break; //0Àº °ËÁ¤»ö
			case 1: SetConsoleTextAttribute(GetStdHandle(STD_OUTPUT_HANDLE), 7); printf("¡á"); break; //1Àº Èò»ö
			case 2: SetConsoleTextAttribute(GetStdHandle(STD_OUTPUT_HANDLE), 4); printf("¡á"); break; //2´Â »¡°£»ö
			}
		}
		puts("");
	}
}

void StartHappy() {
	int menu[MENU][MENU] = {
		{1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1},
		{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
		{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
		{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
		{1,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,0,1},
		{1,0,0,0,0,2,0,0,0,2,0,0,0,2,0,0,0,0,0,1},
		{1,0,0,0,0,0,2,0,2,2,2,0,2,0,0,0,0,0,0,1},
		{1,0,0,0,0,2,0,2,2,2,2,2,0,2,0,0,0,0,0,1},
		{1,0,0,0,2,2,2,2,2,2,2,2,2,2,2,0,0,0,0,1},
		{1,0,0,0,0,2,2,2,2,2,2,2,2,2,0,0,0,0,0,1},
		{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
		{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
		{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
		{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
		{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
		{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
		{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
		{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
		{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
		{1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1}
	};

	for (int i = 0; i < MENU; i++) {
		for (int j = 0; j < MENU; j++) {
			switch (menu[i][j])
			{
			case 0: SetConsoleTextAttribute(GetStdHandle(STD_OUTPUT_HANDLE), 0); printf("¡á"); break; //0Àº °ËÁ¤»ö
			case 1: SetConsoleTextAttribute(GetStdHandle(STD_OUTPUT_HANDLE), 7); printf("¡á"); break; //1Àº Èò»ö
			case 2: SetConsoleTextAttribute(GetStdHandle(STD_OUTPUT_HANDLE), 4); printf("¡á"); break; //2´Â »¡°£»ö
			}
		}
		puts("");
	}
}

void StartMad() {
	int menu[MENU][MENU] = {
		{1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1},
		{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
		{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
		{1,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,0,0,1},
		{1,0,0,0,0,0,2,0,0,0,2,0,2,0,0,0,0,0,0,1},
		{1,0,0,0,0,2,0,0,0,2,0,0,0,2,0,0,0,0,0,1},
		{1,0,0,0,0,0,2,0,2,2,2,0,2,0,0,0,0,0,0,1},
		{1,0,0,2,0,2,0,2,2,2,2,2,0,2,0,2,0,0,0,1},
		{1,0,0,0,2,2,2,2,2,2,2,2,2,2,2,0,0,0,0,1},
		{1,0,0,0,0,2,2,2,2,2,2,2,2,2,0,0,0,0,0,1},
		{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
		{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
		{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
		{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
		{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
		{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
		{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
		{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
		{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
		{1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1}
	};

	for (int i = 0; i < MENU; i++) {
		for (int j = 0; j < MENU; j++) {
			switch (menu[i][j])
			{
			case 0: SetConsoleTextAttribute(GetStdHandle(STD_OUTPUT_HANDLE), 0); printf("¡á"); break; //0Àº °ËÁ¤»ö
			case 1: SetConsoleTextAttribute(GetStdHandle(STD_OUTPUT_HANDLE), 7); printf("¡á"); break; //1Àº Èò»ö
			case 2: SetConsoleTextAttribute(GetStdHandle(STD_OUTPUT_HANDLE), 4); printf("¡á"); break; //2´Â »¡°£»ö
			}
		}
		puts("");
	}
}

void StartMad2() {
	int menu[MENU][MENU] = {
		{1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1},
		{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
		{1,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,0,0,0,1},
		{1,0,0,0,0,2,0,0,0,2,0,0,0,2,0,0,0,0,0,1},
		{1,0,0,0,0,0,2,0,0,0,2,0,2,0,0,0,0,0,0,1},
		{1,0,0,0,0,2,0,0,0,2,0,0,0,2,0,0,0,0,0,1},
		{1,0,0,0,0,0,2,0,2,2,2,0,2,0,0,0,0,0,0,1},
		{1,0,0,2,0,2,0,2,2,2,2,2,0,2,0,2,0,0,0,1},
		{1,0,0,0,2,2,2,2,2,2,2,2,2,2,2,0,0,0,0,1},
		{1,0,0,0,0,2,2,2,2,2,2,2,2,2,0,0,0,0,0,1},
		{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
		{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
		{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
		{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
		{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
		{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
		{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
		{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
		{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
		{1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1}
	};

	for (int i = 0; i < MENU; i++) {
		for (int j = 0; j < MENU; j++) {
			switch (menu[i][j])
			{
			case 0: SetConsoleTextAttribute(GetStdHandle(STD_OUTPUT_HANDLE), 0); printf("¡á"); break; //0Àº °ËÁ¤»ö
			case 1: SetConsoleTextAttribute(GetStdHandle(STD_OUTPUT_HANDLE), 7); printf("¡á"); break; //1Àº Èò»ö
			case 2: SetConsoleTextAttribute(GetStdHandle(STD_OUTPUT_HANDLE), 4); printf("¡á"); break; //2´Â »¡°£»ö
			}
		}
		puts("");
	}
}

void StartSad(){
	int menu[MENU][MENU] = {
			{1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1},
			{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
			{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
			{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
			{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
			{1,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,0,0,1},
			{1,0,0,0,2,0,0,0,2,2,2,0,0,0,2,0,0,0,0,1},
			{1,0,0,0,0,2,0,2,2,2,2,2,0,2,0,0,0,0,0,1},
			{1,0,0,0,2,2,2,2,2,2,2,2,2,2,2,0,0,0,0,1},
			{1,0,0,0,0,2,2,2,2,2,2,2,2,2,0,0,0,0,0,1},
			{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
			{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
			{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
			{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
			{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
			{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
			{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
			{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
			{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
			{1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1}
	};

	for (int i = 0; i < MENU; i++) {
		for (int j = 0; j < MENU; j++) {
			switch (menu[i][j])
			{
			case 0: SetConsoleTextAttribute(GetStdHandle(STD_OUTPUT_HANDLE), 0); printf("¡á"); break; //0Àº °ËÁ¤»ö
			case 1: SetConsoleTextAttribute(GetStdHandle(STD_OUTPUT_HANDLE), 7); printf("¡á"); break; //1Àº Èò»ö
			case 2: SetConsoleTextAttribute(GetStdHandle(STD_OUTPUT_HANDLE), 4); printf("¡á"); break; //2´Â »¡°£»ö
			}
		}
		puts("");
	}
}

void StartSad2() {
	int menu[MENU][MENU] = {
		{1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1},
		{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
		{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
		{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
		{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
		{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
		{1,0,0,0,0,0,0,0,2,2,2,0,0,0,0,0,0,0,0,1},
		{1,0,0,0,0,2,0,2,2,2,2,2,0,2,0,0,0,0,0,1},
		{1,0,0,0,2,2,2,2,2,2,2,2,2,2,2,0,0,0,0,1},
		{1,0,0,0,0,2,2,2,2,2,2,2,2,2,0,0,0,0,0,1},
		{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
		{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
		{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
		{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
		{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
		{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
		{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
		{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
		{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
		{1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1}
	};

	for (int i = 0; i < MENU; i++) {
		for (int j = 0; j < MENU; j++) {
			switch (menu[i][j])
			{
			case 0: SetConsoleTextAttribute(GetStdHandle(STD_OUTPUT_HANDLE), 0); printf("¡á"); break; //0Àº °ËÁ¤»ö
			case 1: SetConsoleTextAttribute(GetStdHandle(STD_OUTPUT_HANDLE), 7); printf("¡á"); break; //1Àº Èò»ö
			case 2: SetConsoleTextAttribute(GetStdHandle(STD_OUTPUT_HANDLE), 4); printf("¡á"); break; //2´Â »¡°£»ö
			}
		}
		puts("");
	}
}

void Happy() {
	count++;
	for (int i = 0; i < 4; i++) {
		Sleep(110);
		system("cls");
		if (i == 3) {
			main();
		}
		StartMenu();
		Sleep(110);
		system("cls");
	
		StartHappy();
		
		gotoxy(7, 13);
		printf("°í¸¶¾û!");
	}
}

void Sick() {
	count -= 2;
	for (int i = 0; i < 4; i++) {
		Sleep(110);
		system("cls");
		if (i == 3) {
			main();
		}
		StartMenu();
		gotoxy(7, 13);
		printf("¹»ÇÑ°Å¾ß..");
		Sleep(110);
		system("cls");
		StartSad();
		gotoxy(7, 13);
		printf("¹»ÇÑ°Å¾ß..");
		Sleep(110);
		system("cls");
		StartSad2();
		gotoxy(7, 13);
		printf("¹»ÇÑ°Å¾ß..");
	}

}

void Mad() {
	count--;
	for (int i = 0; i < 4; i++) {
		Sleep(110);
		system("cls");
		if (i == 3) {
			main();
		}
		StartMenu();
		gotoxy(7, 13);
		printf("À¹ ³Ê¹« ½È¾î");
		Sleep(110);
		system("cls");
		StartMad();
		gotoxy(7, 13);
		printf("À¹ ³Ê¹« ½È¾î");
		Sleep(110);
		system("cls");
		StartMad2();
		gotoxy(7, 13);
		printf("À¹ ³Ê¹« ½È¾î");
	}
}

int KeyControler() {
		int inputKey = _getch();
		if (inputKey == 72) {
			return UP;
		}
		else if (inputKey == 80) {
			return DOWN;
		}
		else if (inputKey == 32) {
			return SUBMIT;
		}
}

int Cursor() {
	int x = 12;
	int y = 13;
	gotoxy(x - 2, y);
	printf("* ¸Ô ÀÌ ÁÖ ±â");
	gotoxy(x, 1 + y);
	printf("Äª Âù ÇØ ÁÖ ±â");
	gotoxy(x, 2 + y);
	printf("Á¾ ·á ÇÏ ±â");
	while (1) {
		int n = KeyControler();
		switch (n) {
		case UP: if (y > 13) {
			gotoxy(x - 2, y);
			printf(" ");
			gotoxy(x - 2, --y);
			printf("*");
		}
				 break;
		case DOWN: if (y < 15) {
			gotoxy(x - 2, y);
			printf(" ");
			gotoxy(x - 2, ++y);
			printf("*");
		}
				   break;
		case SUBMIT: {return y - 13; break; }
		}
	}
}

int First() {
	int x = 8;
	int y = 13;
	gotoxy(x - 2, y);
	printf("* ½º Å× ÀÌ Å© ÁÖ ±â");
	gotoxy(x, 1 + y);
	printf("°õ ÆÎ ÀÌ ÇÉ »§ ÁÖ ±â");
	gotoxy(x, 2 + y);
	printf("¾Æ ¸Þ ¸® Ä« ³ë ÁÖ ±â");
	while (1) {
		int n = KeyControler();
		switch (n) {
		case UP: if (y > 13) {
			gotoxy(x - 2, y);
			printf(" ");
			gotoxy(x - 2, --y);
			printf("*");
		}
				 break;
		case DOWN: if (y < 15) {
			gotoxy(x - 2, y);
			printf(" ");
			gotoxy(x - 2, ++y);
			printf("*");
		}
				   break;
		case SUBMIT: {return y - 13; break; }
		}
	}
}

int Second() {
	int x = 8;
	int y = 13;
	gotoxy(x - 2, y);
	printf("* ³Ê °¡ Á¦ ÀÏ ¿¹ »µ");
	gotoxy(x, 1 + y);
	printf("³Ê ´Â Á¤ ¸» ÃÖ °í ¾ß");
	gotoxy(x, 2 + y);
	printf("³Ê ´Â ´ë Ã¼ ¿Ö »ç ´Ï");
	while (1) {
		int n = KeyControler();
		switch (n) {
		case UP: if (y > 13) {
			gotoxy(x - 2, y);
			printf(" ");
			gotoxy(x - 2, --y);
			printf("*");
		}
				 break;
		case DOWN: if (y < 15) {
			gotoxy(x - 2, y);
			printf(" ");
			gotoxy(x - 2, ++y);
			printf("*");
		}
				   break;
		case SUBMIT: {return y - 13; break; }
		}
	}

}

int main() {

	int w;
	while (1) {
		if (count < 0) {
			exit(1);
		}
		StartMenu();
		gotoxy(50, 3);
		printf("È£°¨µµ : %d", count);
		w = Cursor();
		if (w == 0) {
			int f = First();
			if (f == 0) {
				Happy();
			}
			else if (f == 1) {
				Sick();
			}
			else if (f == 2) {
				Mad();
			}
		}
		else if (w == 1) {
			int s = Second();
			if (s == 0) {
				Happy();
			}
			else if (s == 1) {
				Happy();
			}
			else if (s == 2) {
				Mad();
			}
		}
		else if (w == 2) {
			exit(1);
		}
		
	}

	return 0;
}